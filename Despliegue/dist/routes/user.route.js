"use strict";var __importDefault=this&&this.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.router=void 0;const express_1=require("express"),user_repository_1=__importDefault(require("../repositories/user.repository")),user_controller_1=__importDefault(require("../controllers/user.controller")),error_handler_1=__importDefault(require("../handlers/error.handler")),authentication_guard_1=require("../guards/authentication.guard"),authorization_guard_1=require("../guards/authorization.guard"),schema_validator_1=require("../validators/schema.validator"),user_schemas_1=require("../validators/user.schemas"),router=express_1.Router();exports.router=router;const userRepository=new user_repository_1.default,userController=new user_controller_1.default(userRepository);router.get("/",authentication_guard_1.AuthenticationGuard.canActivate,authorization_guard_1.AuthorizationGuard.canActivate("ADMIN","SUPERADMIN","OPERATOR"),error_handler_1.default.catchAsync(userController.getAll)),router.get("/:_id",error_handler_1.default.catchAsync(userController.getById)),router.post("/",error_handler_1.default.catchAsync(userController.insert)),router.put("/:_id",schema_validator_1.SchemaValidator.canValidate(user_schemas_1.userSchemas.UPDATE),error_handler_1.default.catchAsync(userController.update)),router.delete("/:_id",error_handler_1.default.catchAsync(userController.delete));
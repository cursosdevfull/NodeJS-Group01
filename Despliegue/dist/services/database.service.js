"use strict";var __awaiter=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(i,r){function a(e){try{s(n.next(e))}catch(e){r(e)}}function u(e){try{s(n.throw(e))}catch(e){r(e)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(a,u)}s((n=n.apply(e,t||[])).next())}))},__importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});const mongoose_1=__importDefault(require("mongoose")),yenv_1=__importDefault(require("yenv")),message_util_1=__importDefault(require("../utils/message.util")),env=yenv_1.default(),initializeDatabase=()=>__awaiter(void 0,void 0,void 0,(function*(){const e=new Promise((e,t)=>{const o=`mongodb+srv://${env.URL.MONGODB.USER}:${env.URL.MONGODB.PASS}@${env.URL.MONGODB.HOST}/${env.URL.MONGODB.DB}?retryWrites=true&w=majority`;mongoose_1.default.connect(o,{useNewUrlParser:!0,useCreateIndex:!0,useUnifiedTopology:!0,useFindAndModify:!0,poolSize:10},o=>{o?(message_util_1.default.log("An error ocurred in connection to MongoDB"),t(o)):(message_util_1.default.log("Server is connected to MongoDB"),e())})});yield e}));exports.default=initializeDatabase;
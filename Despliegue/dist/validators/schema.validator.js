"use strict";var __awaiter=this&&this.__awaiter||function(e,a,t,r){return new(t||(t=Promise))((function(s,i){function o(e){try{u(r.next(e))}catch(e){i(e)}}function n(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var a;e.done?s(e.value):(a=e.value,a instanceof t?a:new t((function(e){e(a)}))).then(o,n)}u((r=r.apply(e,a||[])).next())}))},__importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.SchemaValidator=void 0;const responses_util_1=__importDefault(require("../utils/responses.util"));class SchemaValidator{static canValidate(e){return(a,t,r)=>__awaiter(this,void 0,void 0,(function*(){const s=[];["body","params","query","headers"].forEach(t=>{if(e[t])switch(t){case"body":s.push(e[t].validate(a.body));break;case"params":s.push(e[t].validate(a.params));break;case"query":s.push(e[t].validate(a.query));break;case"headers":s.push(e[t].validate(a.headers))}}),Promise.all(s).then(e=>{let a=!1;e.forEach(e=>{e.error&&!a&&(a=!0,responses_util_1.default.send(t,411,e.error))}),a||r()}).catch(e=>{responses_util_1.default.send(t,411,e.error)})}))}}exports.SchemaValidator=SchemaValidator;
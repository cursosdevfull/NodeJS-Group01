"use strict";var __awaiter=this&&this.__awaiter||function(e,t,s,i){return new(s||(s=Promise))((function(r,n){function o(e){try{d(i.next(e))}catch(e){n(e)}}function u(e){try{d(i.throw(e))}catch(e){n(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(o,u)}d((i=i.apply(e,t||[])).next())}))},__importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});const responses_util_1=__importDefault(require("../utils/responses.util")),token_service_1=require("../services/token.service");class UserController{constructor(e){this.userRepository=e,this.getAll=this.getAll.bind(this),this.getById=this.getById.bind(this),this.insert=this.insert.bind(this),this.update=this.update.bind(this),this.delete=this.delete.bind(this)}getAll(e,t){return __awaiter(this,void 0,void 0,(function*(){const e=yield this.userRepository.getAll();if(e.length)return responses_util_1.default.send(t,200,e);responses_util_1.default.send(t,404,{})}))}getById(e,t){return __awaiter(this,void 0,void 0,(function*(){const s=yield this.userRepository.getById(e.params._id);if(s)return responses_util_1.default.send(t,200,s);responses_util_1.default.send(t,404,{})}))}insert(e,t){return __awaiter(this,void 0,void 0,(function*(){const s=token_service_1.TokenService.generateRefreshToken(),i=yield this.userRepository.insert(e.body,s);if(i)return responses_util_1.default.send(t,201,i);responses_util_1.default.send(t,404,{})}))}update(e,t){return __awaiter(this,void 0,void 0,(function*(){const s=yield this.userRepository.update(e.params._id,e.body);if(s)return responses_util_1.default.send(t,201,s);responses_util_1.default.send(t,404,{})}))}delete(e,t){return __awaiter(this,void 0,void 0,(function*(){const s=yield this.userRepository.delete(e.params._id);if(s)return responses_util_1.default.send(t,201,s);responses_util_1.default.send(t,404,{})}))}}exports.default=UserController;